(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{cKEK:function(A,e,t){"use strict";t.r(e),t.d(e,"_frontmatter",(function(){return r})),t.d(e,"default",(function(){return p}));var a,s=t("k1TG"),i=t("8o2o"),n=(t("q1tI"),t("7ljp")),o=t("013z"),r=(t("T0C+"),t("qKvR"),{}),b=(a="PageDescription",function(A){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),Object(n.b)("div",A)}),c={_frontmatter:r},l=o.a;function p(A){var e=A.components,t=Object(i.a)(A,["components"]);return Object(n.b)(l,Object(s.a)({},c,t,{components:e,mdxType:"MDXLayout"}),Object(n.b)(b,{mdxType:"PageDescription"}),Object(n.b)("h2",null,"Introduction"),Object(n.b)("p",null,"There might be situations where customer scenario would require sharing of tiered block storage volumes of varied IOPS to be shared across computes in different availability zones. This article leverages SSHFS to overcome this limitation using a very basic service of SSH which is availabile across operating systems flavours. This recipe is specific to IBM Cloud VPC network construct."),Object(n.b)("p",null,"Note: There currently is not NFS offering in VPC, but one can setup NFS servers and clients and manage them. In this article we are using sshfs instead of NFS to share the volume from one VSI to other VSIs in different regions."),Object(n.b)("h2",null,"Architecture"),Object(n.b)("p",null,"This recipe is based on Implementing below architecture where in block storage for VPC is mounted on virtual server based out of Dallas 1 zone. This volume is then mounted on virtual servers in zones – Dallas2 and Dallas3. So whatever data is written to Dallas1 volume is replicated to Dallas2 and Dallas3. I will take virtual server hosted in Dallas1 data center as primary server or master, where as servers hosted on Dallas2 and Dallas3 as secondary servers or Slaves."),Object(n.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"670px"}},"\n      ",Object(n.b)("span",Object(s.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"100.69444444444444%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB7lsok2VVAAr/xAAXEAEBAQEAAAAAAAAAAAAAAAAAEQIg/9oACAEBAAEFAqqtdf/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEABj8CH//EABsQAAICAwEAAAAAAAAAAAAAAAABESFRcYHB/9oACAEBAAE/IVZzTNkMeBEQcKwhs//aAAwDAQACAAMAAAAQDDj9/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFhEBAQEAAAAAAAAAAAAAAAAAASAh/9oACAECAQE/EF2P/8QAHBABAAIDAAMAAAAAAAAAAAAAAQARITFBkbHB/9oACAEBAAE/EAEQnF9SsEHk2CzfCfYNWm+rHSK3nMaSkPMwBrxRV5P/2Q==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",Object(s.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"keymanagement with openshift-1",title:"keymanagement with openshift-1",src:"/ibm-enterprise-runbooks/static/731808bd871505d4be376ad2bb8ecdf6/4d1ff/Screenshot_1.jpg",srcSet:["/ibm-enterprise-runbooks/static/731808bd871505d4be376ad2bb8ecdf6/69549/Screenshot_1.jpg 288w","/ibm-enterprise-runbooks/static/731808bd871505d4be376ad2bb8ecdf6/473e3/Screenshot_1.jpg 576w","/ibm-enterprise-runbooks/static/731808bd871505d4be376ad2bb8ecdf6/4d1ff/Screenshot_1.jpg 670w"],sizes:"(max-width: 670px) 100vw, 670px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(n.b)("h2",null,"Pre-requisites"),Object(n.b)("p",null,"To Implement this scenario one would need to establish passwordless authentication between secondary servers and primary server or master as shown in below diagram. IBM Cloud VPC comes with private key authentication mechanism by default and one can’t establish passwordless authentication that. Hence one would need to change SSH configuration from private key authentication to password based authentication. Install fuse-sshfs library on secondary servers by running below command :"),Object(n.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"583px"}},"\n      ",Object(n.b)("span",Object(s.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"10.069444444444445%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAACABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB2QUD/8QAFRABAQAAAAAAAAAAAAAAAAAAARD/2gAIAQEAAQUCb//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABUQAQEAAAAAAAAAAAAAAAAAAAAB/9oACAEBAAE/IaRH/9oADAMBAAIAAwAAABDwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQADAQEAAAAAAAAAAAAAAAEAETEhwf/aAAgBAQABPxBLOuexNHXY2tZ//9k=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",Object(s.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"keymanagement with openshift-1",title:"keymanagement with openshift-1",src:"/ibm-enterprise-runbooks/static/0b412008868e80280aac79ff34b4144e/009de/Screenshot_2_0.jpg",srcSet:["/ibm-enterprise-runbooks/static/0b412008868e80280aac79ff34b4144e/69549/Screenshot_2_0.jpg 288w","/ibm-enterprise-runbooks/static/0b412008868e80280aac79ff34b4144e/473e3/Screenshot_2_0.jpg 576w","/ibm-enterprise-runbooks/static/0b412008868e80280aac79ff34b4144e/009de/Screenshot_2_0.jpg 583w"],sizes:"(max-width: 583px) 100vw, 583px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(n.b)("p",null,"Reboot the machine once after installing fuse-sshfs as many times it throws below error during mounting:"),Object(n.b)("h2",null,"“Transport endpoint is not connected“"),Object(n.b)("p",null," or one can manually download the latest verion:"),Object(n.b)("p",null,"wget ",Object(n.b)("a",Object(s.a)({parentName:"p"},{href:"https://github.com/libfuse/sshfs/releases/download/sshfs-3.5.2/sshfs-3.5.2.tar.xz"}),"https://github.com/libfuse/sshfs/releases/download/sshfs-3.5.2/sshfs-3.5.2.tar.xz")),Object(n.b)("img",{src:"images/Screenshot_3.jpg",alt:"keymanagement with openshift-1"}),Object(n.b)("p",null,"The details of virtual Instances are mapped across availability zones as below:"),Object(n.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(n.b)("span",Object(s.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"20.48611111111111%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3aEB/8QAFhAAAwAAAAAAAAAAAAAAAAAAABAR/9oACAEBAAEFAiL/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAXEAADAQAAAAAAAAAAAAAAAAAAAVER/9oACAEBAAE/IcUMQSUR/9oADAMBAAIAAwAAABCDz//EABYRAQEBAAAAAAAAAAAAAAAAAAABMf/aAAgBAwEBPxBdf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAAIDAQAAAAAAAAAAAAAAAAABIVGRMf/aAAgBAQABPxBMShhxhhIso//Z')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",Object(s.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"keymanagement with openshift-1",title:"keymanagement with openshift-1",src:"/ibm-enterprise-runbooks/static/83edd0ecbf573d54a703b4037beb51c8/2e753/screenshot3.jpg",srcSet:["/ibm-enterprise-runbooks/static/83edd0ecbf573d54a703b4037beb51c8/69549/screenshot3.jpg 288w","/ibm-enterprise-runbooks/static/83edd0ecbf573d54a703b4037beb51c8/473e3/screenshot3.jpg 576w","/ibm-enterprise-runbooks/static/83edd0ecbf573d54a703b4037beb51c8/2e753/screenshot3.jpg 1152w","/ibm-enterprise-runbooks/static/83edd0ecbf573d54a703b4037beb51c8/e5901/screenshot3.jpg 1407w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-ibmcloud-vpc-blockstorage-index-mdx-fb317217f8c56dc9e4e7.js.map