{"version":3,"sources":["webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/LastModifiedDate.js","webpack:///./node_modules/gatsby-theme-carbon/src/templates/Default.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/last-modified-date.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.module.scss","webpack:///./src/pages/redhat/backup-restore/index.mdx"],"names":["PageHeader","title","theme","tabs","className","cx","styles","pageHeader","withTabs","length","darkMode","id","text","EditLink","relativePagePath","repositoryProp","repository","useStaticQuery","site","siteMetadata","baseUrl","subDirectory","href","branch","row","link","PageTabs","render","this","props","slug","currentTab","split","filter","Boolean","slice","pageTabs","map","tab","slugifiedTab","slugify","lower","strict","selected","currentTabRegex","RegExp","replace","key","selectedItem","listItem","to","tabsContainer","aria-label","list","React","Component","LastModifiedDate","date","lastModified","Date","toLocaleDateString","day","year","month","Default","pageContext","children","location","Title","frontmatter","titleType","frontmatterTheme","description","keywords","interiorTheme","useMetadata","pathPrefix","pathname","Layout","homepage","pageTitle","pageDescription","pageKeywords","label","Main","padded","NextPrevious","Utils","module","exports","_frontmatter","makeShortcode","name","console","warn","PageDescription","Tabs","Tab","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","open","isMDXComponent"],"mappings":"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","file":"component---src-pages-redhat-backup-restore-index-mdx-9a7fadd39e2239ec8600.js","sourcesContent":["import PageHeader from './PageHeader';\n\nexport default PageHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport styles from './PageHeader.module.scss';\n\nconst PageHeader = ({ title, theme, tabs = [] }) => (\n  <div\n    className={cx(styles.pageHeader, {\n      [styles.withTabs]: tabs.length,\n      [styles.darkMode]: theme === 'dark',\n    })}>\n    <div className=\"bx--grid\">\n      <div className=\"bx--row\">\n        <div className=\"bx--col-lg-12\">\n          <h1 id=\"page-title\" className={styles.text}>\n            {title}\n          </h1>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nPageHeader.propTypes = {\n  /**\n   * Specify the title for the page\n   */\n  title: PropTypes.node,\n};\n\nexport default PageHeader;\n","import EditLink from './EditLink';\n\nexport default EditLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { graphql, useStaticQuery } from 'gatsby';\n\nimport { link, row } from './EditLink.module.scss';\n\nconst EditLink = ({ relativePagePath, repository: repositoryProp }) => {\n  const {\n    site: {\n      siteMetadata: { repository },\n    },\n  } = useStaticQuery(graphql`\n    query REPOSITORY_QUERY {\n      site {\n        siteMetadata {\n          repository {\n            baseUrl\n            subDirectory\n            branch\n          }\n        }\n      }\n    }\n  `);\n\n  const { baseUrl, subDirectory, branch } = repositoryProp || repository;\n\n  const href = `${baseUrl}/edit/${branch}${subDirectory}/src/pages${relativePagePath}`;\n\n  return baseUrl ? (\n    <div className={`bx--row ${row}`}>\n      <div className=\"bx--col\">\n        <a className={link} href={href}>\n          Edit this page on GitHub\n        </a>\n      </div>\n    </div>\n  ) : null;\n};\n\nEditLink.propTypes = {\n  repository: PropTypes.shape({\n    baseUrl: PropTypes.string,\n    subDirectory: PropTypes.string,\n    branch: PropTypes.string,\n  }),\n  relativePagePath: PropTypes.string,\n};\n\nexport default EditLink;\n","import PageTabs from './PageTabs';\n\nexport default PageTabs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'gatsby';\nimport slugify from 'slugify';\nimport cx from 'classnames';\n\nimport {\n  tabsContainer,\n  list,\n  selectedItem,\n  listItem,\n  link,\n} from './PageTabs.module.scss';\n\nexport default class PageTabs extends React.Component {\n  render() {\n    const { title, tabs, slug } = this.props;\n    const currentTab = slug.split('/').filter(Boolean).slice(-1)[0];\n\n    const pageTabs = tabs.map((tab) => {\n      const slugifiedTab = slugify(tab, { lower: true, strict: true });\n      const selected = slugifiedTab === currentTab;\n      // matches with or without trailing slash: /?\n      // matches with or without hash link: (#.*)?\n      const currentTabRegex = new RegExp(`${currentTab}/?(#.*)?$`);\n      const href = slug.replace(currentTabRegex, slugifiedTab);\n      return (\n        <li key={tab} className={cx({ [selectedItem]: selected }, listItem)}>\n          <Link className={link} to={`${href}`}>\n            {tab}\n          </Link>\n        </li>\n      );\n    });\n\n    return (\n      <div className={tabsContainer}>\n        <div className=\"bx--grid\">\n          <div className=\"bx--row\">\n            <div className=\"bx--col-lg-12 bx--col-no-gutter\">\n              <nav aria-label={title}>\n                <ul className={list}>{pageTabs}</ul>\n              </nav>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nPageTabs.propTypes = {\n  tabs: PropTypes.array,\n  slug: PropTypes.string,\n};\n","import LastModifiedDate from './LastModifiedDate';\n\nexport default LastModifiedDate;\n","import React from 'react';\nimport { Row, Column } from '../Grid';\nimport styles from './last-modified-date.module.scss';\n\nconst LastModifiedDate = ({ date }) => {\n  const options = {\n    day: '2-digit',\n    year: 'numeric',\n    month: 'long',\n  };\n\n  const lastModified = new Date(date);\n\n  return date ? (\n    <Row className={styles.row}>\n      <Column>\n        <div className={styles.text}>\n          Page last updated: {lastModified.toLocaleDateString('en-GB', options)}\n          {/* // https://www-03preprod.ibm.com/support/knowledgecenter/ibm_style/dates-and-times.html */}\n        </div>\n      </Column>\n    </Row>\n  ) : null;\n};\nexport default LastModifiedDate;\n","import React from 'react';\nimport slugify from 'slugify';\nimport { useStaticQuery, graphql } from 'gatsby';\n\nimport Utils from '../components/Utils';\nimport Layout from '../components/Layout';\nimport PageHeader from '../components/PageHeader';\nimport EditLink from '../components/EditLink';\nimport NextPrevious from '../components/NextPrevious';\nimport PageTabs from '../components/PageTabs';\nimport Main from '../components/Main';\nimport useMetadata from '../util/hooks/useMetadata';\nimport LastModifiedDate from '../components/LastModifiedDate';\n\nconst Default = ({ pageContext, children, location, Title }) => {\n  const { frontmatter = {}, relativePagePath, titleType } = pageContext;\n  const {\n    tabs,\n    title,\n    theme: frontmatterTheme,\n    description,\n    keywords,\n    date,\n  } = frontmatter;\n\n  const { interiorTheme } = useMetadata();\n\n  // get the path prefix if it exists\n  const {\n    site: { pathPrefix },\n  } = useStaticQuery(graphql`\n    query PATH_PREFIX_QUERY {\n      site {\n        pathPrefix\n      }\n    }\n  `);\n\n  // let gatsby handle prefixing\n  const slug = pathPrefix\n    ? location.pathname.replace(pathPrefix, '')\n    : location.pathname;\n\n  const getCurrentTab = () => {\n    if (!tabs) return '';\n    return (\n      slug.split('/').filter(Boolean).slice(-1)[0] ||\n      slugify(tabs[0], { lower: true })\n    );\n  };\n\n  const currentTab = getCurrentTab();\n\n  const theme = frontmatterTheme || interiorTheme;\n\n  return (\n    <Layout\n      tabs={tabs}\n      homepage={false}\n      theme={theme}\n      pageTitle={title}\n      pageDescription={description}\n      pageKeywords={keywords}\n      titleType={titleType}>\n      <PageHeader\n        title={Title ? <Title /> : title}\n        label=\"label\"\n        tabs={tabs}\n        theme={theme}\n      />\n      {tabs && (\n        <PageTabs\n          title={title}\n          slug={slug}\n          tabs={tabs}\n          currentTab={currentTab}\n        />\n      )}\n      <Main padded>\n        {children}\n        <EditLink relativePagePath={relativePagePath} />\n        <LastModifiedDate date={date} />\n      </Main>\n      <NextPrevious\n        pageContext={pageContext}\n        location={location}\n        slug={slug}\n        tabs={tabs}\n        currentTab={currentTab}\n      />\n      <Utils />\n    </Layout>\n  );\n};\n\nexport default Default;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"EditLink-module--bx--text-truncate--end--2pqje\",\"bxTextTruncateFront\":\"EditLink-module--bx--text-truncate--front--3_lIE\",\"link\":\"EditLink-module--link--1qzW3\",\"row\":\"EditLink-module--row--1B9Gk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageTabs-module--bx--text-truncate--end--267NA\",\"bxTextTruncateFront\":\"PageTabs-module--bx--text-truncate--front--3xEQF\",\"tabsContainer\":\"PageTabs-module--tabs-container--8N4k0\",\"list\":\"PageTabs-module--list--3eFQc\",\"listItem\":\"PageTabs-module--list-item--nUmtD\",\"link\":\"PageTabs-module--link--1mDJ1\",\"selectedItem\":\"PageTabs-module--selected-item--YPVr3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"last-modified-date-module--bx--text-truncate--end--123zi\",\"bxTextTruncateFront\":\"last-modified-date-module--bx--text-truncate--front--3xeKz\",\"text\":\"last-modified-date-module--text--24m-4\",\"row\":\"last-modified-date-module--row--2BquN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageHeader-module--bx--text-truncate--end--mZWeX\",\"bxTextTruncateFront\":\"PageHeader-module--bx--text-truncate--front--3zvrI\",\"pageHeader\":\"PageHeader-module--page-header--3hIan\",\"darkMode\":\"PageHeader-module--dark-mode--hBrwL\",\"withTabs\":\"PageHeader-module--with-tabs--3nKxA\",\"text\":\"PageHeader-module--text--o9LFq\"};","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/ibm-enterprise-runbooks/ibm-enterprise-runbooks/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nimport Globals from 'gatsby-theme-carbon/src/templates/Globals';\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst Tabs = makeShortcode(\"Tabs\");\nconst Tab = makeShortcode(\"Tab\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <PageDescription mdxType=\"PageDescription\">\n    </PageDescription>\n    <h2><strong parentName=\"h2\">{`OpenShift Backup and Restore`}</strong></h2>\n    <p>{`As an administrator, you might need to follow one or more of the following procedures in order to return your cluster to a working state after several disaster situations, that that might occur with their OpenShift Container Platform cluster such as:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Someone accidentally deleted a namespace`}</li>\n      <li parentName=\"ul\">{`Kubernetes API upgrade failed and you need to revert back`}</li>\n      <li parentName=\"ul\">{`Network went down.`}</li>\n      <li parentName=\"ul\">{`Cluster goes into an unrecoverable state`}</li>\n      <li parentName=\"ul\">{`Latest application push introduced a critical bug that wiped a persistent volume and you lost the data.`}</li>\n      <li parentName=\"ul\">{`Rare case of a natural disaster making your cluster inaccessible.`}</li>\n    </ul>\n    <p>{`Velero gives you tools to back up and restore your OpenShift cluster resources and persistent volumes.You can run Velero with a cloud provider or on-premises. Velero lets you:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Take backups of your cluster and restore in case of loss.`}</li>\n      <li parentName=\"ul\">{`Migrate cluster resources to other clusters.`}</li>\n      <li parentName=\"ul\">{`Replicate your production cluster to development and testing clusters.`}</li>\n    </ul>\n    <p>{`Velero consists of:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`A server that runs on your cluster`}</li>\n      <li parentName=\"ul\">{`A command-line client that runs locally`}</li>\n    </ul>\n    <p>{`Velero requires the storage destination to store backup, in the below document we are describing two storage destinations:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`IBM Cloud Object Storage`}</li>\n      <li parentName=\"ul\">{`Minio  `}</li>\n    </ul>\n    <Tabs mdxType=\"Tabs\">\n      <Tab label=\"IBM Cloud Object Store\" open=\"true\" mdxType=\"Tab\">\n        <p>{`In this example we are going to demonstrate Velero with IBM Cloud Object Storage as object storage.`}</p>\n        <h3>{`Clone the Velero repository`}</h3>\n        <pre><code parentName=\"pre\" {...{}}>{`git clone https://github.com/vmware-tanzu/velero.git\n\n`}</code></pre>\n        <h3>{`Create credential file`}</h3>\n        <p>{`Next, we need to create the Minio credential file. So create a file named credentials-velero with the following content:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`[default]\naws_access_key_id = <access-key-id>\naws_secret_access_key = <secret-access-key>\n`}</code></pre>\n        <h3>{`Create an IBM Cloud Object Storage(COS) Service Instance`}</h3>\n        <p>{`If you don’t have a COS instance, you can create a new one.`}</p>\n        <p>{`The next step is to create a bucket for your backups. Velero will use the same bucket to store K8S configuration data as well as Volume backups. See instructions in Create a bucket to store your data. We are naming the bucket backup-ocp and will use this name later to configure velero backup location. You will need to choose another name for your bucket as IBM COS bucket names are globally unique. Choose “Cross Region” Resiliency so it is easy to restore anywhere.`}</p>\n        <h3>{`Create a custom bucket with following configuration:`}</h3>\n        <span {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"37.15277777777778%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6klEQVQoz31Ria6DMAzj/38TIXGUQQuUHhSvDisPPU2rZCWkiWPTahgGdF2HEAKccziOAyklpBIzWNv3XSL7Yoyf+t/96lKeD6hI1ratXBijYe0mOc95nhK992iaRr7XdRV8OyS+CanAmAUxfWnMikalZIAulmWR/v+LqbxSubGua9D6tlms1sNlRb4gWwxHHrpG7yWF5JlzSUX54zjeUGoQ8r7vLzBXE16vCVrPmKYJ8zwLtNbZlREiJw4Nqqd8WiqPwkgLF/JDUOkPbHvE7vxlmSA7NxLcTuXWWgEXPlHq5Y6/atkcQjzwBnX/IMlln85uAAAAAElFTkSuQmCC')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"Bucket Details\",\n            \"title\": \"Bucket Details\",\n            \"src\": \"/ibm-enterprise-runbooks/static/04da4f24787afe87c06e5ff8db661804/3cbba/bucket-details.png\",\n            \"srcSet\": [\"/ibm-enterprise-runbooks/static/04da4f24787afe87c06e5ff8db661804/7fc1e/bucket-details.png 288w\", \"/ibm-enterprise-runbooks/static/04da4f24787afe87c06e5ff8db661804/a5df1/bucket-details.png 576w\", \"/ibm-enterprise-runbooks/static/04da4f24787afe87c06e5ff8db661804/3cbba/bucket-details.png 1152w\", \"/ibm-enterprise-runbooks/static/04da4f24787afe87c06e5ff8db661804/0b124/bucket-details.png 1728w\", \"/ibm-enterprise-runbooks/static/04da4f24787afe87c06e5ff8db661804/4ea69/bucket-details.png 2304w\", \"/ibm-enterprise-runbooks/static/04da4f24787afe87c06e5ff8db661804/2cc83/bucket-details.png 2836w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n        <p>{`The last step in the COS configuration is to define a service that can store data in the bucket. The process of creating service credentials is described in Service credentials. Several comments:\nYour Velero service will write its backup into the bucket, so it requires the “Writer” access role.`}</p>\n        <p>{`Velero uses an AWS S3 compatible API. Which means it authenticates using a signature created from a pair of access and secret keys — a set of HMAC credentials. You can create these HMAC credentials by specifying {“HMAC”:true} as an optional inline parameter. See step 3 in the Service credentials guide.`}</p>\n        <span {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"93.75%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAACH0lEQVQ4y5WUu24TQRSG502oQMIGJOOSngcIipSK1qYKtJRIkY1xm1RJBHkASiRKRENHQYmErJUje3dnL7P3i+HnnHFs7LWjXVb6NLszZ/85lzkjTNOEYRiYTqeYTCaQUiKKIoRhqMc62G5ly/+K2WwGFnUcR4+e520Z1rGyjeMYlmVB8ITv+5o0TbFYLFAUBcqyrCXLsrVwkiSYz+cQ/OG6rvYsCAK9UxNYgMcdQc9j7xTyvCByvWtTOKIdwYg+lO9iUeYoi1yLNoEFWWRH0PUjXNsxplaIuQwp7KUBh1/HZlH+hUzh2g7hKkiCc6mU+u8qrwWV8qkoDgm5tKvSBhwOV7qOvTlMogSOdPQZYrGmhWGxvTn8NTdgzKawbRsmibJwk/zdmsOrn5/w9fo7sihFfHO26tjXemvBwKP8OSZ814JyTUjbpBZcespea89Ncw03QbWHV63Ha+L4KsOj1yWevClx59UCH7/FQEHV9pdhccU34bnbLgduX3H6OUbvPMXLDwmen6X48iNEnlDlqYOqP++7NDZvJi2YRxLIJH4nNpDbCH0Jm64hKW3t0VqIcrxFnCEIE3gqJEgsiOg8kyAaPwkRV4iI4AZ6LyiH4/EYo9EIg8EAw+GwwlsMByc4eXeG4/cB+pclehf5Fv3LAv2LAj1ae3EeQ3S7XXQ6HbRaLbTb7QoP8eD+Xdx7/BTiKIA4BMTBH4hn2OWAOCzwFzTHcdCBIb+sAAAAAElFTkSuQmCC')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"Create Credentials\",\n            \"title\": \"Create Credentials\",\n            \"src\": \"/ibm-enterprise-runbooks/static/a2d564d4277483106b8dd7a5fdc96243/3cbba/create-credentials.png\",\n            \"srcSet\": [\"/ibm-enterprise-runbooks/static/a2d564d4277483106b8dd7a5fdc96243/7fc1e/create-credentials.png 288w\", \"/ibm-enterprise-runbooks/static/a2d564d4277483106b8dd7a5fdc96243/a5df1/create-credentials.png 576w\", \"/ibm-enterprise-runbooks/static/a2d564d4277483106b8dd7a5fdc96243/3cbba/create-credentials.png 1152w\", \"/ibm-enterprise-runbooks/static/a2d564d4277483106b8dd7a5fdc96243/cd87c/create-credentials.png 1678w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n        <p>{`After successfully creating a Service credential, you can view the JSON definition of the credential. Under the cos_hmac_keys entry there are access_key_id and secret_access_key. We will use them later.`}</p>\n        <span {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"26.041666666666668%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAp0lEQVQY032QWw6EIAxF2f82ZiuzEz9MRMQHICB6Z24T0flwmpykLXAoqG3bEEIQUkpgfZJzrnkpBcdxPLLvuzgUNxpjMAwDxnGEtVbqvu+htca6rlXI+Cd1zkFxMw9TSNkpYs4ea8JLvPcif4oQvsIYI5qmQdu2MiFlXddJTuE5/TzP0iPLsvzANe8dtPVQfBInmKap/hn/8g4vvcMz5KojUCJe74wPqIiDZp64cXEAAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"Credentials \",\n            \"title\": \"Credentials \",\n            \"src\": \"/ibm-enterprise-runbooks/static/63a51e01093af2fecf4f27e05e2d400d/3cbba/credentials.png\",\n            \"srcSet\": [\"/ibm-enterprise-runbooks/static/63a51e01093af2fecf4f27e05e2d400d/7fc1e/credentials.png 288w\", \"/ibm-enterprise-runbooks/static/63a51e01093af2fecf4f27e05e2d400d/a5df1/credentials.png 576w\", \"/ibm-enterprise-runbooks/static/63a51e01093af2fecf4f27e05e2d400d/3cbba/credentials.png 1152w\", \"/ibm-enterprise-runbooks/static/63a51e01093af2fecf4f27e05e2d400d/0b124/credentials.png 1728w\", \"/ibm-enterprise-runbooks/static/63a51e01093af2fecf4f27e05e2d400d/4ea69/credentials.png 2304w\", \"/ibm-enterprise-runbooks/static/63a51e01093af2fecf4f27e05e2d400d/4ea3c/credentials.png 2796w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n        <p>{`Now you can copy s3 URL(Direct) from the region you created bucket, we will use this url while installing velero`}</p>\n        <span {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"18.40277777777778%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAi0lEQVQY012PWw6FIAwF2f8ieUXlw0hQHgGD6c1pAvH6MWk7BVrEeZ5Ua52UUiiEQDnnP486pTT51gOx7ztd1zUPxRjpOA6OA3icwfCB954Hvx0QzjmSUpK1ltZ1ZbZtY5RSZIzh/O1xR2tNy7JMNxC9d7rvm7dorfH3UD/PwxGbw317yLE9/OjhrR9yPjGeqKMzIAAAAABJRU5ErkJggg==')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"S3 URL\",\n            \"title\": \"S3 URL\",\n            \"src\": \"/ibm-enterprise-runbooks/static/10c9598743657f4dd95fb3ed3f8cddfe/3cbba/s3-url.png\",\n            \"srcSet\": [\"/ibm-enterprise-runbooks/static/10c9598743657f4dd95fb3ed3f8cddfe/7fc1e/s3-url.png 288w\", \"/ibm-enterprise-runbooks/static/10c9598743657f4dd95fb3ed3f8cddfe/a5df1/s3-url.png 576w\", \"/ibm-enterprise-runbooks/static/10c9598743657f4dd95fb3ed3f8cddfe/3cbba/s3-url.png 1152w\", \"/ibm-enterprise-runbooks/static/10c9598743657f4dd95fb3ed3f8cddfe/0b124/s3-url.png 1728w\", \"/ibm-enterprise-runbooks/static/10c9598743657f4dd95fb3ed3f8cddfe/4ea69/s3-url.png 2304w\", \"/ibm-enterprise-runbooks/static/10c9598743657f4dd95fb3ed3f8cddfe/781ae/s3-url.png 2802w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n        <p>{`create a project velero in openshift`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc new-project velero\n`}</code></pre>\n        <h3>{`Install Velero`}</h3>\n        <p>{`We are finally ready to install Velero. Run the following command:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`velero install \\\\\n    --provider aws \\\\\n    --plugins velero/velero-plugin-for-aws:v1.0.0 \\\\\n    --bucket backup-ocp \\\\\n    --secret-file ./credentials-velero \\\\\n    --use-volume-snapshots=true \\\\\n    --backup-location-config region=us-geo,s3ForcePathStyle=\"true\",s3Url=http://s3.direct.us.cloud-object-storage.appdomain.cloud\n`}</code></pre>\n        <p>{`And you should see the following output:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`CustomResourceDefinition/backups.velero.io: attempting to create resource\nCustomResourceDefinition/backups.velero.io: already exists, proceeding\nCustomResourceDefinition/backups.velero.io: created\nCustomResourceDefinition/backupstoragelocations.velero.io: attempting to create resource\nCustomResourceDefinition/backupstoragelocations.velero.io: already exists, proceeding\nCustomResourceDefinition/backupstoragelocations.velero.io: created\nCustomResourceDefinition/deletebackuprequests.velero.io: attempting to create resource\nCustomResourceDefinition/deletebackuprequests.velero.io: already exists, proceeding\nCustomResourceDefinition/deletebackuprequests.velero.io: created\nCustomResourceDefinition/downloadrequests.velero.io: attempting to create resource\nCustomResourceDefinition/downloadrequests.velero.io: already exists, proceeding\nCustomResourceDefinition/downloadrequests.velero.io: created\nCustomResourceDefinition/podvolumebackups.velero.io: attempting to create resource\nCustomResourceDefinition/podvolumebackups.velero.io: already exists, proceeding\nCustomResourceDefinition/podvolumebackups.velero.io: created\nCustomResourceDefinition/podvolumerestores.velero.io: attempting to create resource\nCustomResourceDefinition/podvolumerestores.velero.io: already exists, proceeding\nCustomResourceDefinition/podvolumerestores.velero.io: created\nCustomResourceDefinition/resticrepositories.velero.io: attempting to create resource\nCustomResourceDefinition/resticrepositories.velero.io: already exists, proceeding\nCustomResourceDefinition/resticrepositories.velero.io: created\nCustomResourceDefinition/restores.velero.io: attempting to create resource\nCustomResourceDefinition/restores.velero.io: already exists, proceeding\nCustomResourceDefinition/restores.velero.io: created\nCustomResourceDefinition/schedules.velero.io: attempting to create resource\nCustomResourceDefinition/schedules.velero.io: already exists, proceeding\nCustomResourceDefinition/schedules.velero.io: created\nCustomResourceDefinition/serverstatusrequests.velero.io: attempting to create resource\nCustomResourceDefinition/serverstatusrequests.velero.io: already exists, proceeding\nCustomResourceDefinition/serverstatusrequests.velero.io: created\nCustomResourceDefinition/volumesnapshotlocations.velero.io: attempting to create resource\nCustomResourceDefinition/volumesnapshotlocations.velero.io: already exists, proceeding\nCustomResourceDefinition/volumesnapshotlocations.velero.io: created\nWaiting for resources to be ready in cluster...\nNamespace/velero: attempting to create resource\nNamespace/velero: already exists, proceeding\nNamespace/velero: created\nClusterRoleBinding/velero: attempting to create resource\nClusterRoleBinding/velero: already exists, proceeding\nClusterRoleBinding/velero: created\nServiceAccount/velero: attempting to create resource\nServiceAccount/velero: created\nSecret/cloud-credentials: attempting to create resource\nSecret/cloud-credentials: created\nBackupStorageLocation/default: attempting to create resource\nBackupStorageLocation/default: created\nVolumeSnapshotLocation/default: attempting to create resource\nVolumeSnapshotLocation/default: created\nDeployment/velero: attempting to create resource\nDeployment/velero: created\nVelero is installed! ⛵ Use 'kubectl logs deployment/velero -n velero' to view the status.\n`}</code></pre>\n        <p>{`Now, we need to test it. Create some Kubernetes resources`}</p>\n        <p>{`To test the backup procedure, let’s first create some Kubernetes resources. It doesn’t matter which resource, so I will stick to a simple one: ConfigMap. Run the following script to create an OpenShift project and many ConfigMaps:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc new-project test-backup\nfor i in {1..20}; do echo Creating ConfigMap $i; oc create configmap cm-$i --from-literal=\"key=$i\"; done\n`}</code></pre>\n        <p>{`The lines above create a new project and 20 ConfigMaps. Run the following command to confirm`}</p>\n        <h3>{`Back up OpenShift`}</h3>\n        <p>{`Now, we can test the backup procedure. For simplicity, we are going to back up only the test-backup project, but the same concept applies to any (or all) projects. Run the following command:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`velero backup create my-backup --include-namespaces test-backup\n`}</code></pre>\n        <p>{`You will get following output:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`Backup request \"my-backup\" submitted successfully.\nRun \\`velero backup describe my-backup\\` or \\`velero backup logs my-backup0\\` for more details.\n`}</code></pre>\n        <p>{`After a few seconds, you can check the backup has completed:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc get backup -n velero my-backup -o jsonpath='{.status.phase}'\n`}</code></pre>\n        <p>{`Now delete these configmaps: `}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc delete configmap cm-{1..20}\n`}</code></pre>\n        <h3>{`Restoring the environment`}</h3>\n        <p>{`Let’s now restore the backup that Velero created:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`velero restore create --from-backup my-backup\n`}</code></pre>\n        <p>{`You will get following output:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`Restore request \"my-backup-20201106170117\" submitted successfully.\nRun \\`velero restore describe my-backup-20201106170117\\` or \\`velero restore logs my-backup-20201106170117\\` for more details.\n`}</code></pre>\n        <p>{`You can validate by running the following command:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc get configmap\n`}</code></pre>\n        <p>{`It should return no configmap:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`o resources found in test-backup namespace\n`}</code></pre>\n      </Tab>\n      <Tab label=\"Minio\" open=\"false\" mdxType=\"Tab\">\n        <p>{`In this example we are going to demonstrate Velero with Minio as object storage.`}</p>\n        <h3>{`Clone the Velero repository`}</h3>\n        <pre><code parentName=\"pre\" {...{}}>{`git clone https://github.com/vmware-tanzu/velero.git\n`}</code></pre>\n        <h3>{`create a project velero in openshift`}</h3>\n        <pre><code parentName=\"pre\" {...{}}>{`oc new-project velero\n`}</code></pre>\n        <h3>{`Install MinIO`}</h3>\n        <pre><code parentName=\"pre\" {...{}}>{`cd velero\noc apply -f examples/minio/00-minio-deployment.yaml\n`}</code></pre>\n        <p>{`And you should see the output like this:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`namespace/velero created\ndeployment.apps/minio created\nservice/minio created\njob.batch/minio-setup created\n`}</code></pre>\n        <h3>{`Expose MinIO`}</h3>\n        <p>{`Now, we need to expose the MinIO service outside the cluster, so that the velero CLI can interact with it. In OpenShift, this is pretty simple:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc project velero\noc expose svc minio\n`}</code></pre>\n        <p>{`You should see the following output:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`route.route.openshift.io/minio exposed\n`}</code></pre>\n        <p>{`You can get the information about the route by running the following command:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc get route minio\n`}</code></pre>\n        <p>{`You should be able to open the URL listed there and log in using user: minio and password: minio123\nInstall Velero CLI`}</p>\n        <p>{`Next, we need to install the Velero CLI in the local machine. For Mac, run the following command:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`brew install velero\n`}</code></pre>\n        <h3>{`Create credential file`}</h3>\n        <p>{`Next, we need to create the Minio credential file. So create a file named credentials-velero with the following content:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`[default]\naws_access_key_id = minio\naws_secret_access_key = minio123\n`}</code></pre>\n        <h3>{`Install Velero`}</h3>\n        <p>{`We are finally ready to install Velero. Run the following command:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`velero install \\\\\n    --provider aws \\\\\n    --plugins velero/velero-plugin-for-aws:v1.0.0 \\\\\n    --bucket velero \\\\\n    --secret-file ./credentials-velero \\\\\n    --use-volume-snapshots=false \\\\\n    --backup-location-config region=minio,s3ForcePathStyle=\"true\",s3Url=http://minio.velero.svc:9000\n`}</code></pre>\n        <p>{`And you should see the following output:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`CustomResourceDefinition/backups.velero.io: attempting to create resource\nCustomResourceDefinition/backups.velero.io: already exists, proceeding\nCustomResourceDefinition/backups.velero.io: created\nCustomResourceDefinition/backupstoragelocations.velero.io: attempting to create resource\nCustomResourceDefinition/backupstoragelocations.velero.io: already exists, proceeding\nCustomResourceDefinition/backupstoragelocations.velero.io: created\nCustomResourceDefinition/deletebackuprequests.velero.io: attempting to create resource\nCustomResourceDefinition/deletebackuprequests.velero.io: already exists, proceeding\nCustomResourceDefinition/deletebackuprequests.velero.io: created\nCustomResourceDefinition/downloadrequests.velero.io: attempting to create resource\nCustomResourceDefinition/downloadrequests.velero.io: already exists, proceeding\nCustomResourceDefinition/downloadrequests.velero.io: created\nCustomResourceDefinition/podvolumebackups.velero.io: attempting to create resource\nCustomResourceDefinition/podvolumebackups.velero.io: already exists, proceeding\nCustomResourceDefinition/podvolumebackups.velero.io: created\nCustomResourceDefinition/podvolumerestores.velero.io: attempting to create resource\nCustomResourceDefinition/podvolumerestores.velero.io: already exists, proceeding\nCustomResourceDefinition/podvolumerestores.velero.io: created\nCustomResourceDefinition/resticrepositories.velero.io: attempting to create resource\nCustomResourceDefinition/resticrepositories.velero.io: already exists, proceeding\nCustomResourceDefinition/resticrepositories.velero.io: created\nCustomResourceDefinition/restores.velero.io: attempting to create resource\nCustomResourceDefinition/restores.velero.io: already exists, proceeding\nCustomResourceDefinition/restores.velero.io: created\nCustomResourceDefinition/schedules.velero.io: attempting to create resource\nCustomResourceDefinition/schedules.velero.io: already exists, proceeding\nCustomResourceDefinition/schedules.velero.io: created\nCustomResourceDefinition/serverstatusrequests.velero.io: attempting to create resource\nCustomResourceDefinition/serverstatusrequests.velero.io: already exists, proceeding\nCustomResourceDefinition/serverstatusrequests.velero.io: created\nCustomResourceDefinition/volumesnapshotlocations.velero.io: attempting to create resource\nCustomResourceDefinition/volumesnapshotlocations.velero.io: already exists, proceeding\nCustomResourceDefinition/volumesnapshotlocations.velero.io: created\nWaiting for resources to be ready in cluster...\nNamespace/velero: attempting to create resource\nNamespace/velero: already exists, proceeding\nNamespace/velero: created\nClusterRoleBinding/velero: attempting to create resource\nClusterRoleBinding/velero: already exists, proceeding\nClusterRoleBinding/velero: created\nServiceAccount/velero: attempting to create resource\nServiceAccount/velero: created\nSecret/cloud-credentials: attempting to create resource\nSecret/cloud-credentials: created\nBackupStorageLocation/default: attempting to create resource\nBackupStorageLocation/default: created\nDeployment/velero: attempting to create resource\nDeployment/velero: created\nVelero is installed! ⛵ Use 'kubectl logs deployment/velero -n velero' to view the status.\n`}</code></pre>\n        <p>{`Now, we need to test it.\nCreate some Kubernetes resources`}</p>\n        <p>{`To test the backup procedure, let’s first create some Kubernetes resources. It doesn’t matter which resource, so I will stick to a simple one: ConfigMap. Run the following script to create an OpenShift project and many ConfigMaps:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc new-project test-backup\nfor i in {1..20}; do echo Creating ConfigMap $i; oc create configmap cm-$i --from-literal=\"key=$i\"; done\n`}</code></pre>\n        <p>{`The lines above create a new project and 20 ConfigMaps. Run the following command to confirm:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc get configmap\n`}</code></pre>\n        <h3>{`Back up OpenShift`}</h3>\n        <p>{`Now, we can test the backup procedure. For simplicity, we are going to back up only the test-backup project, but the same concept applies to any (or all) projects. Run the following command:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`velero backup create my-backup --include-namespaces test-backup\n`}</code></pre>\n        <p>{`and you will see the following output:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`Backup request \"my-backup\" submitted successfully.\nRun \\`velero backup describe my-backup\\` or \\`velero backup logs my-backup\\` for more details.\n`}</code></pre>\n        <p>{`After a few seconds, you can check the backup has completed:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`velero backup describe my-backup\n`}</code></pre>\n        <p>{`now delete these configmaps: `}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc delete configmap cm-{1..20}\n`}</code></pre>\n        <p>{`You can validate by running the following command:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc get configmap\n`}</code></pre>\n        <p>{`It should return no configmap:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`o resources found in test-backup namespace\n`}</code></pre>\n        <h3>{`Restoring the environment`}</h3>\n        <p>{`Let’s now restore the backup that Velero created:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`velero restore create --from-backup my-backup\n`}</code></pre>\n        <p>{`you will see the following output:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`Restore request \"my-backup-20201022164948\" submitted successfully.\nRun \\`velero restore describe my-backup-20201022164948\\` or \\`velero restore logs my-backup-20201022164948\\` for more details.\n`}</code></pre>\n        <p>{`Now, we can check the result:`}</p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc get cm\n`}</code></pre>\n        <p>{`And you should see the 20 ConfigMaps restored.`}</p>\n      </Tab>\n    </Tabs>\n    <p>{`Refrences:`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://medium.com/ibm-garage/how-to-install-velero-in-an-openshift-environment-f7484fabbbe4\"\n        }}>{`https://medium.com/ibm-garage/how-to-install-velero-in-an-openshift-environment-f7484fabbbe4`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://medium.com/@mlrborowski/using-ark-and-restic-to-provide-dr-for-ibm-kubernetes-service-cae53cfe532\"\n        }}>{`https://medium.com/@mlrborowski/using-ark-and-restic-to-provide-dr-for-ibm-kubernetes-service-cae53cfe532`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://velero.io/docs/v1.5/contributions/ibm-config/#docs\"\n        }}>{`https://velero.io/docs/v1.5/contributions/ibm-config/#docs`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://blog.kubernauts.io/backup-and-restore-of-kubernetes-applications-using-heptios-velero-with-restic-and-rook-ceph-as-2e8df15b1487\"\n        }}>{`https://blog.kubernauts.io/backup-and-restore-of-kubernetes-applications-using-heptios-velero-with-restic-and-rook-ceph-as-2e8df15b1487`}</a></li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}