{"componentChunkName":"component---src-pages-ibmcloud-vpc-blockstorage-dr-index-mdx","path":"/ibmcloud/vpc-blockstorage-dr/","result":{"pageContext":{"frontmatter":{"title":"Sharing Block Storage Volumes across Cross Region VPC"},"relativePagePath":"/ibmcloud/vpc-blockstorage-dr/index.mdx","titleType":"page","MdxNode":{"id":"f19a72cd-04ac-5492-ae0b-0be083d3bb84","children":[],"parent":"874f3a59-b0e8-57b6-9439-2d78b4774bf7","internal":{"content":"---\ntitle: Sharing Block Storage Volumes across Cross Region VPC\n---\n\nimport Globals from 'gatsby-theme-carbon/src/templates/Globals';\n\n<PageDescription>\n\n\n</PageDescription>\n\n## Introduction\nThis article show cases cross VPC sharing of volumes which might be useful in DR kind of scenarios\n\n\n## Architecture\nThe solution has DC and DR located in two regions Dallas and Washington DC within Virtual Private Clouds (VPC) that are connected to each other through a transit gateway. The shared block storage is hosted on virtual server hosted in zone Dallas1 and mounted through SSHFS on virtual server in Dallas2 zone and Washington1 zone in DR site .\n\n![keymanagement with openshift-1](images/Screenshot_1.jpg)\n\n## Transit Gateway\nIBM Cloud® Transit Gateway is used to interconnect IBM Cloud classic and Virtual Private Cloud (VPC) infrastructures worldwide, keeping traffic within the IBM Cloud private network. With IBM Cloud Transit Gateway, organizations can define and control communication between resources on the IBM Cloud network, providing dynamic scalability, high availability, and private, in-transit data between IBM Cloud data centers. Transit gateways are commonly implemented to support hybrid workloads, frequent data transfers, private workloads, or to ease administration of the IBM Cloud environment. One can configure several types of connections with IBM Cloud Transit Gateway:\n\n    1. Connect VPCs in the same region (local routing)\n    2. Connect VPCs in different regions (global routing)\n    3. Connect VPCs to your IBM Cloud classic infrastructure\n\n![keymanagement with openshift-1](images/Screenshot_12.jpg)\n\nWe will be leveraging the capability of VPC Interconnect across regions to connect DC and DR through transit gateway.\n\nFrom cost perspective Transit Gateway is charged above 1TB data transfer monthly. Refer below link for details on pricing:\n\nhttps://cloud.ibm.com/docs/transit-gateway?topic=transit-gateway-tg-pricing\n\nTransit needs to be created in one of the region say Dallas or Washington.\n\n![keymanagement with openshift-1](images/Screenshot_5.jpg)\n\nSelect “VPC” as both source and destination networks are VPC.\n\n![keymanagement with openshift-1](images/Screenshot_6.jpg)\n\nFor cross region routing “Global Routing” needs to be enabled.\n\n![keymanagement with openshift-1](images/Screenshot_4.jpg)\n\nAdd Connections\n\n![keymanagement with openshift-1](images/Screenshot_7.jpg)\n\nTo configure gateway one would need to hook VPC from both the ends which in our case is Dallas and Washington.\n\n## Test Connectivity between Virtual Machines from Dallas VPC and Washington VPC\n\nPing Washington server from Dallas VPC availability zone 3\n\n![keymanagement with openshift-1](images/Screenshot_8.jpg)\n\nRepeat the test with Virtual servers located in other zones. We are now ready to proceed further for mounting. Follow the steps mentioned in previous article to miunt the remote volume to local directory as shown below.\n\n![keymanagement with openshift-1](images/Screenshot_9.jpg)\n\nMake entry in **/etc/fstab**\n\n![keymanagement with openshift-1](images/Screenshot_10.jpg)\n\nCheck whether files are available:\n\n![keymanagement with openshift-1](images/Screenshot_11.jpg)\n\n## References\na) https://medium.com/@moreal70/how-to-integrate-securely-multiple-vpcs-on-ibm-cloud-1835438d5941\n\nb) https://cloud.ibm.com/docs/transit-gateway?topic=transit-gateway-about\n\nc) https://www.ibm.com/cloud/blog/announcements/ibm-cloud-transit-gateway\n\n","type":"Mdx","contentDigest":"acb721e3b428cf22871ecd118e512aa2","counter":950,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Sharing Block Storage Volumes across Cross Region VPC"},"exports":{},"rawBody":"---\ntitle: Sharing Block Storage Volumes across Cross Region VPC\n---\n\nimport Globals from 'gatsby-theme-carbon/src/templates/Globals';\n\n<PageDescription>\n\n\n</PageDescription>\n\n## Introduction\nThis article show cases cross VPC sharing of volumes which might be useful in DR kind of scenarios\n\n\n## Architecture\nThe solution has DC and DR located in two regions Dallas and Washington DC within Virtual Private Clouds (VPC) that are connected to each other through a transit gateway. The shared block storage is hosted on virtual server hosted in zone Dallas1 and mounted through SSHFS on virtual server in Dallas2 zone and Washington1 zone in DR site .\n\n![keymanagement with openshift-1](images/Screenshot_1.jpg)\n\n## Transit Gateway\nIBM Cloud® Transit Gateway is used to interconnect IBM Cloud classic and Virtual Private Cloud (VPC) infrastructures worldwide, keeping traffic within the IBM Cloud private network. With IBM Cloud Transit Gateway, organizations can define and control communication between resources on the IBM Cloud network, providing dynamic scalability, high availability, and private, in-transit data between IBM Cloud data centers. Transit gateways are commonly implemented to support hybrid workloads, frequent data transfers, private workloads, or to ease administration of the IBM Cloud environment. One can configure several types of connections with IBM Cloud Transit Gateway:\n\n    1. Connect VPCs in the same region (local routing)\n    2. Connect VPCs in different regions (global routing)\n    3. Connect VPCs to your IBM Cloud classic infrastructure\n\n![keymanagement with openshift-1](images/Screenshot_12.jpg)\n\nWe will be leveraging the capability of VPC Interconnect across regions to connect DC and DR through transit gateway.\n\nFrom cost perspective Transit Gateway is charged above 1TB data transfer monthly. Refer below link for details on pricing:\n\nhttps://cloud.ibm.com/docs/transit-gateway?topic=transit-gateway-tg-pricing\n\nTransit needs to be created in one of the region say Dallas or Washington.\n\n![keymanagement with openshift-1](images/Screenshot_5.jpg)\n\nSelect “VPC” as both source and destination networks are VPC.\n\n![keymanagement with openshift-1](images/Screenshot_6.jpg)\n\nFor cross region routing “Global Routing” needs to be enabled.\n\n![keymanagement with openshift-1](images/Screenshot_4.jpg)\n\nAdd Connections\n\n![keymanagement with openshift-1](images/Screenshot_7.jpg)\n\nTo configure gateway one would need to hook VPC from both the ends which in our case is Dallas and Washington.\n\n## Test Connectivity between Virtual Machines from Dallas VPC and Washington VPC\n\nPing Washington server from Dallas VPC availability zone 3\n\n![keymanagement with openshift-1](images/Screenshot_8.jpg)\n\nRepeat the test with Virtual servers located in other zones. We are now ready to proceed further for mounting. Follow the steps mentioned in previous article to miunt the remote volume to local directory as shown below.\n\n![keymanagement with openshift-1](images/Screenshot_9.jpg)\n\nMake entry in **/etc/fstab**\n\n![keymanagement with openshift-1](images/Screenshot_10.jpg)\n\nCheck whether files are available:\n\n![keymanagement with openshift-1](images/Screenshot_11.jpg)\n\n## References\na) https://medium.com/@moreal70/how-to-integrate-securely-multiple-vpcs-on-ibm-cloud-1835438d5941\n\nb) https://cloud.ibm.com/docs/transit-gateway?topic=transit-gateway-about\n\nc) https://www.ibm.com/cloud/blog/announcements/ibm-cloud-transit-gateway\n\n","fileAbsolutePath":"/home/runner/work/ibm-enterprise-runbooks/ibm-enterprise-runbooks/src/pages/ibmcloud/vpc-blockstorage-dr/index.mdx"}}},"staticQueryHashes":["1364590287","2102389209","2102389209","243517648","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","63531786","63531786","768070550","817386451"]}